{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Welcome to the Logistics Management System</h1>

    {% if user %}
    <div class="greeting">
        <h2>Hello, {{ user.username }}!</h2>
    </div>
    {% else %}
    <div class="greeting">
        <h2>Hello, Guest!</h2>
    </div>
    {% endif %}

    <!-- Search Form -->
    <form method="POST" action="{{ url_for('routes.search') }}" class="mb-4">
        <div class="input-group">
            <input type="text" name="query" class="form-control" placeholder="Search..." required>
            <div class="input-group-append">
                <button class="btn btn-primary" type="submit">Search</button>
            </div>
        </div>
    </form>

    <div class="row">
        <div class="col-md-4">
            <h3>Active Agents</h3>
            <ul class="list-group">
                {% for agent in agents %}
                    <li class="list-group-item">{{ agent.name }} ({{ agent.role }})</li>
                {% else %}
                    <li class="list-group-item">No active agents.</li>
                {% endfor %}
            </ul>
        </div>

        <!-- Quick Actions - Removed 'View Reports' Button -->
        <div class="col-md-4">
            <h3>Quick Actions</h3>
            <!-- Add other action buttons here if needed -->
        </div>
    </div>

    <div id="announcement-carousel" class="carousel slide mt-4" data-ride="carousel">
        <div class="carousel-inner">
            {% for announcement in announcements %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="d-block w-100" style="height: 200px;">
                        <h4>{{ announcement.title }}</h4>
                        <p>{{ announcement.message }}</p>
                    </div>
                </div>
            {% else %}
                <div class="carousel-item active">
                    <div class="d-block w-100" style="height: 200px;">
                        <h4>No announcements available.</h4>
                    </div>
                </div>
            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#announcement-carousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#announcement-carousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<!-- Include Tawk.to Script -->
<script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function() {
        var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
        s1.async=true;
        s1.src='https://embed.tawk.to/YOUR_TAWKTO_ID/default';
        s1.charset='UTF-8';
        s1.setAttribute('crossorigin','*');
        s0.parentNode.insertBefore(s1,s0);
    })();
</script>

{% endblock %}
